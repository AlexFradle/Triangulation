(()=>{"use strict";const t=(t,s,o)=>Math.acos((s*s+o*o-t*t)/(2*s*o)),s=(t,s)=>Math.sqrt(Math.pow(s[0]-t[0],2)+Math.pow(s[1]-t[1],2)),o=(t,s)=>Math.floor(Math.random()*(s-t+1))+t,n=(t,s)=>{const o=(s[1]-t[1])/(s[0]-t[0]);return{m:o,c:t[1]-o*t[0],func:function(t){return this.m*t+this.c}}},e=1e3;let i=!0;const r=[[100,100],[100,900],[900,900],[900,100]],c=r[3][0]-r[0][0],a=r[1][1]-r[0][1],h=[...Array(20).fill(0).map((t=>[o(r[0][0],c),o(r[0][1],a)]))];class u{constructor(o,n,i){this.a=o,this.b=n,this.c=i,this.edges=this.getEdges(),this.circumcenter=((o,n,e)=>{const i=s(o,n),r=s(o,e),c=s(n,e),a=t(c,i,r),h=t(r,c,i),u=Math.PI-(a+h),l=Math.sin(2*a),f=Math.sin(2*h),m=Math.sin(2*u),g=l+f+m;return[(o[0]*l+n[0]*f+e[0]*m)/g,(o[1]*l+n[1]*f+e[1]*m)/g]})(this.a,this.b,this.c),this.circumradius=((t,o,n)=>([t,o,n]=[s(t,o),s(t,n),s(o,n)],t*o*n/Math.sqrt((t+o+n)*(o+n-t)*(n+t-o)*(t+o-n))))(this.a,this.b,this.c),this.color=[0,Math.min(...this.points.map((t=>t[1])))/e*255,Math.min(...this.points.map((t=>t[1])))/e*255]}getEdges(){return[[this.a,this.b],[this.b,this.c],[this.c,this.a]]}get points(){return[this.a,this.b,this.c]}}const l=(t,o)=>{const e=new u(...((t,s,o,e,i=!1)=>{const r=[t[0]+(e[0]-t[0])/2,t[1]+(s[1]-t[1])/2],c=t=>[1.05*(t[0]-r[0])+r[0],1.05*(t[1]-r[1])+r[1]],a=c(t),h=c(s),u=c(o),l=c(e),f=l[0]-a[0],m=[a[0]-f,a[1]],g=[l[0]+f,l[1]],d=((t,s)=>{if(void 0===t.m||void 0===s.m)throw"an arg is not a line equation";const o=(s.c-t.c)/(t.m-s.m);return[o,t.func(o)]})(n(m,h),n(g,u));return i?[[m,d,g],[a,h,u,l]]:[m,d,g]})(...o));let i=[];i.push(e);for(const o of t){const t=[];for(const n of i)s(o,n.circumcenter)<n.circumradius&&t.push(n);const n=[];for(const s of t)for(const o of s.edges)void 0===t.filter((t=>t!==s)).flatMap((t=>t.edges)).find((t=>{return n=o,(s=t)[0][0]===n[0][0]&&s[0][1]===n[0][1]&&s[1][0]===n[1][0]&&s[1][1]===n[1][1]||s[1][0]===n[0][0]&&s[1][1]===n[0][1]&&s[0][0]===n[1][0]&&s[0][1]===n[1][1];var s,n}))&&n.push(o);for(const s of t)i=i.filter((t=>t!==s));for(const t of n){const s=new u(t[0],t[1],o);i.push(s)}}for(const t of i)t.points.some((t=>e.points.includes(t)))&&(i=i.filter((s=>s!==t)));return i};new p5((t=>{const n=h,u=Array(h.length).fill(0).map((t=>(()=>{const t=o(0,360)*(Math.PI/180);return{unit:{x:Math.cos(t),y:Math.sin(t)},magnitude:o(1,3)}})()));let f=l(h,r),m=null;t.setup=()=>{t.createCanvas(1e3,e),t.frameRate(60)},t.draw=()=>{t.background(255),f=l(h,r),t.noFill(),t.stroke("red"),t.rect(100,100,c,a),(()=>{for(let t=0;t<h.length;t++){let s=h[t][0]+u[t].unit.x*u[t].magnitude,o=h[t][1]+u[t].unit.y*u[t].magnitude;(s<r[0][0]||s>r[3][0])&&(u[t].unit.x=-u[t].unit.x,s=h[t][0]+u[t].unit.x*u[t].magnitude),(o<r[0][1]||o>r[2][0])&&(u[t].unit.y=-u[t].unit.y,o=h[t][1]+u[t].unit.y*u[t].magnitude),h[t]=[s,o]}})(),t.strokeWeight(1),i||t.noFill();for(const s of f)t.stroke(...s.color),i&&t.fill(...s.color),t.triangle(...s.a,...s.b,...s.c);t.strokeWeight(10),t.stroke("black");for(const[s,o]of n)t.point(s,o)},t.mousePressed=()=>{for(let o=0;o<h.length;o++){const[n,e]=h[o];s([t.mouseX,t.mouseY],[n,e])<20&&(m=o)}},t.mouseDragged=()=>{const[o,n]=h[m];s([t.mouseX,t.mouseY],[o,n])<20&&(h[m]=[t.mouseX,t.mouseY])}}),"canvas"),document.getElementById("toggle-fill").onchange=t=>{i=t.target.checked}})();
//# sourceMappingURL=index.bundle.js.map